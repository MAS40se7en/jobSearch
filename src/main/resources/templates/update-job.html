<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Updating Job Details</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
<div class="container my-5">
    <h1 class="text-center mb-4">Updating Job Details</h1>
</div>

<form method="post" th:action="@{/jobs/{id}/update(id=${job.id})}" th:object="${job}" class="container" novalidate>
    <div class="mb-3">
        <label for="id" class="form-label">Job ID</label>
        <input readonly class="form-control-plaintext" id="id" name="id" th:value="${job.id}">
    </div>

    <div class="mb-3">
        <label for="title" class="form-label">Job Title</label>
        <input type="text" class="form-control" id="title" name="title" th:field="*{title}" required>
        <div class="invalid-feedback">
            Please provide a job title.
        </div>
    </div>

    <div class="mb-3">
        <label for="companyName" class="form-label">Company Name</label>
        <input readonly class="form-control-plaintext" id="companyName" name="companyName" th:value="${job.company.name}">
    </div>

    <div class="mb-3">
        <label for="location" class="form-label">Location</label>
        <input type="text" class="form-control" id="location" name="location" th:field="*{location}" required>
        <div class="invalid-feedback">
            Please provide a location.
        </div>
    </div>

    <div class="mb-3">
        <label for="description" class="form-label">Job Description</label>
        <input type="text" class="form-control" id="description" name="description" th:field="*{description}" required>
        <div class="invalid-feedback">
            Please provide a description.
        </div>
    </div>

    <div class="mb-3">
        <label for="minSalary" class="form-label">Minimum Salary</label>
        <input type="text" class="form-control" id="minSalary" name="minSalary" th:field="*{minSalary}" required>
        <div class="invalid-feedback">
            Please provide a minimum salary.
        </div>
    </div>

    <div class="mb-3">
        <label for="maxSalary" class="form-label">Maximum Salary</label>
        <input type="text" class="form-control" id="maxSalary" name="maxSalary" th:field="*{maxSalary}" required>
        <div class="invalid-feedback">
            Please provide a maximum salary.
        </div>
    </div>

    <button type="submit" class="btn btn-primary">Submit</button>
    <a href="/jobs" class="btn btn-secondary">Cancel</a>
</form>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

<script>
    // Check if any input field is empty
    function checkEmptyFields() {
        var inputs = document.querySelectorAll('input[type="text"], input[type="number"]')
        var isEmpty = false
        inputs.forEach(function (input) {
            if (!input.value.trim()) {
                isEmpty = true
            }
        })
        return isEmpty
    }

    // Form submission event listener
    document.addEventListener('DOMContentLoaded', function () {
        'use strict'

        // Fetch the form
        var form = document.querySelector('form')

        // Form submission handler
        form.addEventListener('submit', function (event) {
            // Prevent form submission if any input field is empty
            if (checkEmptyFields()) {
                event.preventDefault()
                event.stopPropagation()
                alert('Please fill in all fields.')
            }

            // Add Bootstrap's validation styles
            form.classList.add('was-validated')
        }, false)
    })
</script>

</body>
</html>
